{"version":3,"sources":["images/header-logo.svg","images/success.svg","images/error.svg","components/Header.js","hooks/useValidation.js","components/FormContent.js","components/Login.js","components/Register.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteConfirmPopup.js","components/ImagePopup.js","components/InfoTooltip.js","utils/token.js","utils/Api.js","components/ProtectedRoute.js","auth.js","components/App.js","index.js"],"names":["module","exports","Header","onSignOut","loggedIn","email","location","useLocation","history","useHistory","React","useState","open","setOpen","handleLinkName","pathname","className","src","logo","alt","onClick","push","useValidation","fields","fieldsEnumeration","value","reduce","acc","field","isValid","setIsValid","inputValue","setInputValue","validationMessage","setValidationMessage","handleInputChange","event","target","name","validity","valid","FormContent","handleSubmit","formName","submitValue","useEffect","action","onSubmit","preventDefault","password","noValidate","type","onChange","placeholder","required","Login","onLogin","isLoading","Register","onRegister","to","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","link","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","key","Footer","Popup","isOpen","onClose","children","handleEscapeClose","document","addEventListener","removeEventListener","onMouseUp","currentTarget","handleClassName","EditProfilePopup","onUpdateUser","minLength","maxLength","pattern","EditAvatarPopup","onUpdateAvatar","avatarInputRef","useRef","current","ref","AddPlacePopup","DeleteConfirmPopup","ImagePopup","InfoTooltip","isRegister","success","error","setToken","token","localStorage","setItem","getToken","getItem","api","baseUrl","headers","this","fetch","getHeaders","then","res","ok","json","Promise","reject","status","item","method","body","JSON","stringify","newCard","id","ProtectedRoute","routeProps","BASE_URL","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDeletePopupOpen","setDeletePopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","isTooltipPopupOpen","setTooltipPopupOpen","setLoggedIn","setIsRegister","setEmail","handleContentGetter","data","auth","jwt","catch","err","console","log","tokenCheck","getUserAndCards","a","all","getUserInfo","getCards","userInfo","closeAllPopups","Provider","removeItem","path","response","statusCode","exact","dislikeCard","likeCard","newCards","c","setUserInfo","userData","finally","createCard","setAvatar","deleteCard","deleteCards","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.365a0e01.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header-logo.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.4072126c.svg\";","import React from \"react\";\r\nimport logo from '../images/header-logo.svg';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nconst Header = ({ onSignOut, loggedIn, email }) => {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    const handleLinkName = () => {\r\n        if (location.pathname === '/signin') {\r\n            return 'Регистрация';\r\n        } else if (location.pathname === '/') {\r\n            return 'Выйти';\r\n        } else {\r\n            return 'Войти';\r\n        }\r\n    }\r\n\r\n    const handleButtonClick = () => {\r\n        if (handleLinkName() === 'Регистрация') {\r\n            history.push('/signup');\r\n        } else if (handleLinkName() === 'Войти') {\r\n            history.push('/signin');\r\n        } else {\r\n            onSignOut();\r\n        }\r\n    }\r\n\r\n    const handleMenuClick = () => {\r\n        setOpen(!open);\r\n    }\r\n\r\n    const handleClassName = () => {\r\n        if (loggedIn && open) {\r\n            return \"header__cover header__cover_type_vertical header__cover_type_active\";\r\n        } else if (!loggedIn) {\r\n            return \"header__cover\";\r\n        } else if (loggedIn) {\r\n            return \"header__cover header__cover_type_vertical\";\r\n        }\r\n    }\r\n\r\n    return (\r\n        <header className={`${loggedIn && open ? `header page__header header_type_active` : `header page__header`}`}>\r\n                <img className=\"header__logo\" src={logo} alt=\"Логотип сайта Место\" />\r\n            <div className={handleClassName()}>\r\n                <span\r\n                    className={`${loggedIn ? `header__email header__email_type_active` : `header__email`}`}>{email}</span>\r\n                <button\r\n                    className={`${loggedIn ? `header__button header__button_type_log-out` : `header__button`}`}\r\n                    onClick={handleButtonClick}>{handleLinkName()}</button>\r\n            </div>\r\n            <div onClick={handleMenuClick} className={`${loggedIn ? `header__menu-wrapper header__menu-wrapper_type_active` : `header__menu-wrapper`}`}>\r\n                <div className={open ? `header__menu header__menu_type_active` : `header__menu`} />\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nconst useValidation = (fields) => {\r\n    const fieldsEnumeration = (value) => {\r\n        return (\r\n            fields.reduce((acc, field) => {\r\n                acc[field] = value;\r\n                return acc\r\n            }, {})\r\n        )\r\n    };\r\n\r\n    const [isValid, setIsValid] = React.useState(fieldsEnumeration(false));\r\n    const [inputValue, setInputValue] = React.useState(fieldsEnumeration(''));\r\n    const [validationMessage, setValidationMessage] = React.useState(fieldsEnumeration(''));\r\n\r\n    const handleInputChange = (event) => {\r\n        const { name, value } = event.target;\r\n        setInputValue({\r\n            ...inputValue,\r\n            [name]: value\r\n        });\r\n\r\n        setIsValid({\r\n            ...isValid,\r\n            [name]: event.target.validity.valid\r\n        });\r\n\r\n        setValidationMessage({\r\n            ...validationMessage,\r\n            [name]: event.target.validationMessage\r\n        });\r\n    };\r\n\r\n    return {\r\n        isValid, setIsValid,\r\n        inputValue, setInputValue,\r\n        validationMessage, setValidationMessage,\r\n        handleInputChange, fieldsEnumeration\r\n    }\r\n}\r\n\r\nexport default useValidation;","import React from \"react\";\r\nimport useValidation from \"../hooks/useValidation\";\r\n\r\nconst FormContent = ({ handleSubmit, formName, submitValue }) => {\r\n    const fields = ['email', 'password'];\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n        handleSubmit({\r\n            email: inputValue.email,\r\n            password: inputValue.password,\r\n        });\r\n    }\r\n\r\n    const {\r\n        isValid, setIsValid,\r\n        inputValue, setInputValue,\r\n        validationMessage, setValidationMessage,\r\n        handleInputChange, fieldsEnumeration\r\n    } = useValidation(fields);\r\n\r\n    React.useEffect(() => {\r\n        setInputValue(fieldsEnumeration(''));\r\n        setIsValid(fieldsEnumeration(false));\r\n        setValidationMessage(fieldsEnumeration(''));\r\n        // eslint-disable-next-line\r\n    }, [setInputValue, setIsValid, setValidationMessage]);\r\n\r\n    return (\r\n        <form className=\"form_type_register\"\r\n            action=\"#\"\r\n            name={formName}\r\n            onSubmit={onSubmit}\r\n            noValidate>\r\n            <div className=\"popup__cover popup__cover_type_register\">\r\n                <label className=\"popup__control\">\r\n                    <input\r\n                        className={`${validationMessage.email ? `popup__input popup__input_type_email popup__input_type_error` : `popup__input popup__input_type_email`}`}\r\n                        type=\"email\" name=\"email\" value={inputValue.email}\r\n                        onChange={handleInputChange} placeholder=\"Email\" required />\r\n                    <span\r\n                        className={`${isValid.email ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.email}</span>\r\n                </label>\r\n                <label className=\"popup__control\">\r\n                    <input\r\n                        className={`${validationMessage.password ? `popup__input popup__input_type_password popup__input_type_error` : `popup__input popup__input_type_password`}`}\r\n                        type=\"password\" name=\"password\" value={inputValue.password}\r\n                        onChange={handleInputChange} placeholder=\"Пароль\" required />\r\n                    <span\r\n                        className={`${isValid.password ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.password}</span>\r\n                </label>\r\n            </div>\r\n            <input\r\n                className={`${isValid.email && isValid.password ? `popup__button popup__button_type_white` : `popup__button popup__button_type_white popup__button_type_disabled`}`}\r\n                type=\"submit\" value={submitValue} name=\"submit\" />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default FormContent;","import React from \"react\";\r\nimport FormContent from \"./FormContent\";\r\n\r\nconst Login = ({ onLogin, isLoading }) => {\r\n    const submitValue = `${isLoading ? `Выполняется вход...` : `Войти`}`;\r\n    const formName = \"login\";\r\n\r\n    const handleLoginSubmit = ({ email, password }) => {\r\n        if (!email || !password) {\r\n            return;\r\n        }\r\n        onLogin(email, password);\r\n    }\r\n\r\n    return (\r\n        <section className=\"register\">\r\n            <h2 className=\"popup__title popup__title_type_white\">Вход</h2>\r\n            <FormContent handleSubmit={handleLoginSubmit} formName={formName} submitValue={submitValue} />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Login;","import React from \"react\";\r\nimport FormContent from \"./FormContent\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Register = ({ onRegister, isLoading }) => {\r\n    const submitValue = `${isLoading ? `Регистрация...` : `Зарегистрироваться`}`;\r\n    const formName = \"register\";\r\n\r\n    const handleRegisterSubmit = ({ email, password }) => {\r\n        if (!email || !password) {\r\n            return;\r\n        }\r\n        onRegister(email, password);\r\n    }\r\n\r\n    return (\r\n        <section className=\"register\">\r\n            <h2 className=\"popup__title popup__title_type_white\">Регистрация</h2>\r\n            <FormContent handleSubmit={handleRegisterSubmit} formName={formName} submitValue={submitValue} />\r\n            <Link to=\"signin\" className=\"register__link\">Уже зарегистрированы? Войти</Link>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Register;","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete }) => {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = card.owner === currentUser._id;\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n\r\n    const handleLikeClick = () => {\r\n        onCardLike(card);\r\n    }\r\n\r\n    const handleDeleteClick = () => {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    const handleClick = () => {\r\n        onCardClick(card);\r\n    }\r\n\r\n    return (\r\n        <li className=\"card\">\r\n            <button\r\n                className={`${isOwn ? `card__remove-button card__remove-button_show` : `card__remove-button`}`}\r\n                type=\"button\" onClick={handleDeleteClick} />\r\n            <img className=\"card__image\" src={card.link} alt={card.name} onClick={handleClick} />\r\n            <div className=\"card__description\">\r\n                <p className=\"card__name\">{card.name}</p>\r\n                <div className=\"card__like-cover\">\r\n                    <button\r\n                        className={`${isLiked ? `card__like card__like_active` : `card__like`}`}\r\n                        type=\"button\" onClick={handleLikeClick} />\r\n                    <span className=\"card__like-counter\">{card.likes.length}</span>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Main = ({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardLike, onCardDelete, cards }) => {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    return (\r\n        <main className=\"content page__content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__avatar-button\" onClick={onEditAvatar}>\r\n                    <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"аватар\" />\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                    <button className=\"profile__button-edit\" type=\"button\"\r\n                        onClick={onEditProfile} />\r\n                    <p className=\"profile__profession\">{currentUser.about}</p>\r\n                </div>\r\n                <button className=\"profile__button-add\" type=\"button\" onClick={onAddPlace} />\r\n            </section>\r\n\r\n            <section className=\"elements\">\r\n                <ul className=\"elements__list\">\r\n                    {cards.map((card) => <Card key={card._id} onCardClick={onCardClick} card={card}\r\n                        onCardLike={onCardLike} onCardDelete={onCardDelete} />)}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer page__footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\n\r\nconst Popup = ({ name, isOpen, onClose, children }) => {\r\n    const handleEscapeClose = (event) => {\r\n        if (event.key === 'Escape') {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleEscapeClose, false);\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleEscapeClose, false);\r\n        };\r\n        // eslint-disable-next-line\r\n    }, [isOpen]);\r\n\r\n    const handleOverlayClose = (event) => {\r\n        if (event.target === event.currentTarget && isOpen) {\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const handleClassName = (name) => {\r\n        if (name === \"picture\") {\r\n            return \"popup__container popup__img-container\";\r\n        } else if (name === \"info\") {\r\n            return \"popup__container popup__container_type_info\";\r\n        } else {\r\n            return \"popup__container\";\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section className={`${isOpen ? `popup popup_type_${name} popup_opened` : `popup popup_type_${name}`}`}\r\n            onMouseUp={handleOverlayClose}>\r\n            <div className={handleClassName(name)}>\r\n                <button className={`${(name === \"info\") ? `popup__close popup__close_type_info` : `popup__close`}`}\r\n                    type=\"button\"\r\n                    onClick={onClose} />\r\n                {children}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Popup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport useValidation from \"../hooks/useValidation\";\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser, isLoading }) => {\r\n    const fields = ['name', 'about'];\r\n\r\n    const {\r\n        isValid, setIsValid,\r\n        inputValue, setInputValue,\r\n        validationMessage, setValidationMessage,\r\n        handleInputChange, fieldsEnumeration\r\n    } = useValidation(fields);\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateUser({\r\n            name: inputValue.name,\r\n            about: inputValue.about,\r\n        });\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        setInputValue({\r\n            name: currentUser.name || '',\r\n            about: currentUser.about || '',\r\n        });\r\n        setIsValid(fieldsEnumeration(true));\r\n        setValidationMessage(fieldsEnumeration(''));\r\n        // eslint-disable-next-line\r\n    }, [currentUser, isOpen, setInputValue, setIsValid, setValidationMessage]);\r\n\r\n    return (\r\n        <Popup name=\"edit\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            >\r\n            <h2 className=\"popup__title\">Редактировать профиль</h2>\r\n            <form className={'popup__form form_type_edit'}\r\n                action=\"#\"\r\n                name=\"edit\"\r\n                onSubmit={handleSubmit}\r\n                noValidate>\r\n                    <label className=\"popup__control\">\r\n                        <input\r\n                            className={`${validationMessage.name ? `popup__input popup__input_type_name popup__input_type_error` : `popup__input popup__input_type_name`}`}\r\n                            type=\"text\" name=\"name\" value={inputValue.name}\r\n                            onChange={handleInputChange} placeholder=\"Имя\" minLength=\"2\" maxLength=\"20\"\r\n                            pattern=\"^[A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\" required />\r\n                        <span\r\n                            className={`${isValid.name ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.name}</span>\r\n                    </label>\r\n                    <label className=\"popup__control\">\r\n                        <input\r\n                            className={`${validationMessage.about ? `popup__input popup__input_type_about popup__input_type_error` : `popup__input popup__input_type_about`}`}\r\n                            type=\"text\" name=\"about\" value={inputValue.about}\r\n                            onChange={handleInputChange} placeholder=\"Занятие\" minLength=\"2\" maxLength=\"200\"\r\n                            pattern=\"^[A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\" required />\r\n                        <span\r\n                            className={`${isValid.about ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.about}</span>\r\n                    </label>\r\n                <input\r\n                    className={`${isValid.name && isValid.about ? `popup__button` : `popup__button popup__button_type_disabled`}`}\r\n                    type=\"submit\" value={`${isLoading ? `Сохранение...` : `Сохранить`}`} name=\"submit\" />\r\n            </form>\r\n        </Popup>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\nimport useValidation from \"../hooks/useValidation\";\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, isLoading }) => {\r\n    const fields = ['avatar'];\r\n\r\n    const {\r\n        isValid, setIsValid,\r\n        inputValue, setInputValue,\r\n        validationMessage, setValidationMessage,\r\n        handleInputChange, fieldsEnumeration\r\n    } = useValidation(fields);\r\n\r\n    const avatarInputRef = React.useRef(null);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: avatarInputRef.current.value,\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setInputValue(fieldsEnumeration(''));\r\n        setIsValid(fieldsEnumeration(false));\r\n        setValidationMessage(fieldsEnumeration(''));\r\n        // eslint-disable-next-line\r\n    }, [isOpen, setInputValue, setIsValid, setValidationMessage]);\r\n\r\n    return (\r\n        <Popup name=\"avatar\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}>\r\n            <h2 className=\"popup__title\">Обновить аватар</h2>\r\n            <form className={'popup__form form_type_avatar'}\r\n                action=\"#\"\r\n                name=\"avatar\"\r\n                onSubmit={handleSubmit}\r\n                noValidate>\r\n                <div className=\"popup__cover popup__cover_type_avatar\">\r\n                    <label className=\"popup__control\">\r\n                        <input ref={avatarInputRef}\r\n                            className={`${validationMessage.avatar ? `popup__input popup__input_type_avatar popup__input_type_error` : `popup__input popup__input_type_avatar`}`}\r\n                            type=\"url\" name=\"avatar\" value={inputValue.avatar} placeholder=\"Ссылка на картинку\"\r\n                            onChange={handleInputChange} required />\r\n                        <span\r\n                            className={`${isValid.avatar ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.avatar}</span>\r\n                    </label>\r\n                </div>\r\n                <input\r\n                    className={`${isValid.avatar ? `popup__button` : `popup__button popup__button_type_disabled`}`}\r\n                    type=\"submit\"\r\n                    value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\r\n                    name=\"submit\" />\r\n            </form>\r\n        </Popup>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\nimport useValidation from \"../hooks/useValidation\";\r\n\r\nconst AddPlacePopup = ({ isOpen, onClose, onAddPlace, isLoading }) => {\r\n    const fields = ['name', 'link'];\r\n\r\n    const {\r\n        isValid, setIsValid,\r\n        inputValue, setInputValue,\r\n        validationMessage, setValidationMessage,\r\n        handleInputChange, fieldsEnumeration\r\n    } = useValidation(fields);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onAddPlace({\r\n            name: inputValue.name,\r\n            link: inputValue.link\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setInputValue(fieldsEnumeration(''));\r\n        setIsValid(fieldsEnumeration(false));\r\n        setValidationMessage(fieldsEnumeration(''));\r\n        // eslint-disable-next-line\r\n    }, [isOpen, setInputValue, setIsValid, setValidationMessage]);\r\n\r\n    return (\r\n        <Popup\r\n            name=\"add\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}>\r\n            <form className={'popup__form form_type_add'}\r\n                action=\"#\"\r\n                name=\"add\"\r\n                onSubmit={handleSubmit}\r\n                noValidate>\r\n            <h2 className=\"popup__title\">Новое место</h2>\r\n                <div className=\"popup__cover\">\r\n                    <label className=\"popup__control\">\r\n                        <input\r\n                            className={`${validationMessage.name ? `popup__input popup__input_type_title popup__input_type_error` : `popup__input popup__input_type_title`}`}\r\n                            type=\"text\" name=\"name\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\"\r\n                            pattern=\"^[A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\"\r\n                            required value={inputValue.name}\r\n                            onChange={handleInputChange} />\r\n                        <span\r\n                            className={`${isValid.name ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.name}</span>\r\n                    </label>\r\n                    <label className=\"popup__control\">\r\n                        <input\r\n                            className={`${validationMessage.link ? `popup__input popup__input_type_link popup__input_type_error` : `popup__input popup__input_type_link`}`}\r\n                            type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" required value={inputValue.link}\r\n                            onChange={handleInputChange} />\r\n                        <span\r\n                            className={`${isValid.link ? `popup__error` : `popup__error popup__error_type_active`}`}>{validationMessage.link}</span>\r\n                    </label>\r\n                </div>\r\n                <input\r\n                    className={`${isValid.link && isValid.name ? `popup__button` : `popup__button popup__button_type_disabled`}`}\r\n                    type=\"submit\" value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\r\n                    name=\"submit\" />\r\n            </form>\r\n        </Popup>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nconst DeleteConfirmPopup = ({ card, onClose, isOpen, onCardDelete, isLoading }) => {\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onCardDelete(card);\r\n    };\r\n\r\n    return (\r\n        <Popup name=\"prevent\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}>\r\n            <h2 className=\"popup__title\">Вы уверены?</h2>\r\n            <form className={'popup__form form_type_prevent'}\r\n                action=\"#\"\r\n                name=\"prevent\"\r\n                onSubmit={handleSubmit}\r\n                noValidate>\r\n                <input className=\"popup__button\" type=\"submit\" name=\"submit\"\r\n                    value={`${isLoading ? `Удаление...` : `Да`}`} />\r\n            </form>\r\n        </Popup>\r\n    )\r\n}\r\n\r\nexport default DeleteConfirmPopup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nconst ImagePopup = ({ card, isOpen, onClose }) => {\r\n    return (\r\n        <Popup name=\"picture\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}>\r\n            <figure className=\"popup__figure\">\r\n                <img className=\"popup__image\" src={card.link} alt={card.name} />\r\n                <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n            </figure>\r\n        </Popup>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\nimport success from '../images/success.svg';\r\nimport error from '../images/error.svg';\r\n\r\nconst InfoTooltip = ({ isRegister, isOpen, onClose }) => {\r\n    return (\r\n        <Popup name=\"info\"\r\n            isOpen={isOpen}\r\n            onClose={onClose}>\r\n            <img className=\"popup__icon\" src={`${isRegister ? `${success}` : `${error}`}`}\r\n                alt=\"Значок об успешной регистрации либо ошибке\" />\r\n            <h2 className=\"popup__title popup__title_type_center\">{`${isRegister ? `Вы успешно зарегистрировались!` : `Что-то пошло не так!\r\nПопробуйте ещё раз.`}`}</h2>\r\n        </Popup>\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;","const TOKEN_KEY = 'jwt';\r\n\r\nexport const setToken = (token) => localStorage.setItem(TOKEN_KEY, token);\r\n\r\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\r\n\r\nexport const removeToken = () => localStorage.removeItem(TOKEN_KEY);","import { getToken } from \"./token\";\r\n\r\nclass Api {\r\n    constructor({ baseUrl, headers }) {\r\n        this.baseUrl = baseUrl;\r\n        this.headers = headers;\r\n    }\r\n\r\n    getHeaders() {\r\n        const token = getToken();\r\n\r\n        return {\r\n            ...this.headers,\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this.baseUrl}users/me`, {\r\n            headers: this.getHeaders(),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this.baseUrl}cards`, {\r\n            headers: this.getHeaders(),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    setUserInfo(item) {\r\n        return fetch(`${this.baseUrl}users/me`, {\r\n            method: 'PATCH',\r\n            headers: this.getHeaders(),\r\n            body: JSON.stringify({\r\n                name: item.name,\r\n                about: item.about\r\n            })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    createCard(newCard) {\r\n        return fetch(`${this.baseUrl}cards`, {\r\n            method: 'POST',\r\n            headers: this.getHeaders(),\r\n            body: JSON.stringify({\r\n                name: newCard.name,\r\n                link: newCard.link,\r\n            })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    deleteCard(id) {\r\n        return fetch(`${this.baseUrl}cards/${id}`, {\r\n            method: 'DELETE',\r\n            headers: this.getHeaders(),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    likeCard(id) {\r\n        return fetch(`${this.baseUrl}cards/${id}/likes`, {\r\n            method: 'PUT',\r\n            headers: this.getHeaders(),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    dislikeCard(id) {\r\n        return fetch(`${this.baseUrl}cards/${id}/likes`, {\r\n            method: 'DELETE',\r\n            headers: this.getHeaders(),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n\r\n    setAvatar(avatar) {\r\n        return fetch(`${this.baseUrl}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this.getHeaders(),\r\n            body: JSON.stringify(avatar),\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`)\r\n            })\r\n    }\r\n}\r\n\r\nconst api = new Api({ \r\n    baseUrl: process.env.NODE_ENV === 'production'\r\n    ? 'https://api.krisdekker.students.nomoredomains.rocks/'\r\n    : 'http://localhost:3000/',\r\n\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    }\r\n})\r\n\r\nexport default api;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ loggedIn, ...routeProps }) => {\r\n    return loggedIn ? <Route {...routeProps} /> : <Redirect to=\"./sign-in\" />\r\n}\r\n\r\nexport default ProtectedRoute;","import { setToken } from \"./utils/token\";\r\n\r\nexport const BASE_URL = process.env.NODE_ENV === 'production'\r\n? 'https://api.krisdekker.students.nomoredomains.rocks'\r\n: 'http://localhost:3000';\r\n\r\nexport const register = (email, password) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n        .then(response => {\r\n            let data = response.json();\r\n            if (!response.ok) {\r\n                return Promise.reject(response.status);\r\n            }\r\n            return data;\r\n        })\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ email, password })\r\n    })\r\n        .then((response => {\r\n            let data = response.json();\r\n            if (!response.ok) {\r\n                return Promise.reject(response.status);\r\n            }\r\n            return data;\r\n        }))\r\n        .then((data) => {\r\n            if (data.token) {\r\n                setToken(data.token);\r\n                return data;\r\n            }\r\n        })\r\n};\r\n\r\nexport const getContent = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    })\r\n        .then((res => {\r\n            let data = res.json();\r\n            if (!res.ok) {\r\n                return Promise.reject(res.status);\r\n            }\r\n            return data;\r\n        }))\r\n};","import React from 'react';\nimport Header from \"./Header\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeleteConfirmPopup from \"./DeleteConfirmPopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { getToken, removeToken, setToken } from \"../utils/token\";\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from '../auth.js';\n\nconst App = () => {\n    const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n    const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n    const [isDeletePopupOpen, setDeletePopupOpen] = React.useState(false);\n    const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState(false);\n    const [currentUser, setCurrentUser] = React.useState([]);\n    const [cards, setCards] = React.useState([]);\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const [isTooltipPopupOpen, setTooltipPopupOpen] = React.useState(false);\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [isRegister, setIsRegister] = React.useState(false);\n    const [email, setEmail] = React.useState('');\n    const history = useHistory();\n\n    const handleContentGetter = (token) => {\n        return auth.getContent(token)\n            .then((res) => {\n                setEmail(res.email);\n                setLoggedIn(true);\n                history.push('/');\n            })\n    }\n\n    const tokenCheck = () => {\n        const jwt = getToken();\n        if (!jwt) {\n            return;\n        }\n        handleContentGetter(jwt)\n            .catch((err) => {\n                if (err === 401) {\n                    console.log('Произошла ошибка, токен не был передан, был передан не в том формате или не является корректным')\n                }\n            });\n    }\n\n    React.useEffect(() => {\n        tokenCheck();\n        // eslint-disable-next-line\n    }, []);\n\n    const onLogin = (email, password) => {\n        auth.authorize(email, password)\n            .then((data) => {\n                if (!data) {\n                    return\n                }\n                if (data.token) {\n                    setToken(data.token);\n                    handleContentGetter(data.token)\n                }\n            })\n            .catch((err) => {\n                if (err === 400) {\n                    console.log('Произошла ошибка, не передано одно из полей');\n                } else if (err === 401) {\n                    console.log('Произошла ошибка, пользователь с данным email не найден');\n                }\n            });\n    }\n\n    const onRegister = (email, password) => {\n        auth.register(email, password)\n            .then((res) => {\n                if (res.statusCode !== 400) {\n                    setIsRegister(true);\n                    setTooltipPopupOpen(true);\n                    history.push('/signin');\n                }\n            })\n            .catch((err) => {\n                setIsRegister(false);\n                setTooltipPopupOpen(true);\n                if (err === 400) {\n                    console.log('Произошла ошибка, некорректно заполнено одно из полей')\n                }\n            });\n    }\n\n    const onSignOut = () => {\n        removeToken();\n        setEmail('');\n        setLoggedIn(false);\n        history.push('/signin');\n    }\n\n    const handleCardLike = (card) => {\n        const isLiked = card.likes.some(i => i === currentUser._id);\n        const promise = isLiked ? api.dislikeCard(card._id) : api.likeCard(card._id);\n        promise\n            .then((newCard) => {\n                const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            });\n    };\n\n    const handleCardDelete = (card) => {\n        setIsLoading(true)\n        api.deleteCard(card._id)\n            .then(() => {\n                const deleteCards = cards.filter((c) => c._id !== card._id);\n                setCards(deleteCards);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false)\n            })\n    };\n\n    const getUserAndCards = async () => {\n        try {\n            const [userInfo, cards] = await Promise.all([api.getUserInfo(), api.getCards()]);\n            setCards(cards);\n            setCurrentUser(userInfo);\n        } catch (err) {\n            console.log(`${err}`);\n        }\n    };\n\n    React.useEffect(() => {\n        if (!loggedIn) return;\n        getUserAndCards();\n    }, [loggedIn]);\n\n    const handleEditAvatarClick = () => {\n        setEditAvatarPopupOpen(true);\n    };\n\n    const handleEditProfileClick = () => {\n        setEditProfilePopupOpen(true);\n    };\n\n    const handleAddPlaceClick = () => {\n        setAddPlacePopupOpen(true);\n    };\n\n    const handleDeletePopupOpenClick = (card) => {\n        setDeletePopupOpen(true);\n        setSelectedCard(card);\n    };\n\n    const handleCardClick = (card) => {\n        setImagePopupOpen(true);\n        setSelectedCard(card);\n    };\n\n    const closeAllPopups = () => {\n        setEditAvatarPopupOpen(false);\n        setEditProfilePopupOpen(false);\n        setAddPlacePopupOpen(false);\n        setDeletePopupOpen(false);\n        setSelectedCard(false);\n        setImagePopupOpen(false);\n        setTooltipPopupOpen(false);\n    };\n\n    const handleUpdateUser = (userInfo) => {\n        setIsLoading(true)\n        api.setUserInfo(userInfo)\n            .then((userData) => {\n                setCurrentUser(userData);\n                console.log(userData);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false);\n            })\n    };\n\n    const handleUpdateAvatar = (inputValue) => {\n        setIsLoading(true)\n        api.setAvatar(inputValue)\n            .then((avatar) => {\n                setCurrentUser(avatar);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false);\n            })\n    };\n\n    const handleAddPlaceSubmit = (inputValue) => {\n        setIsLoading(true)\n        api.createCard(inputValue)\n            .then((newCard) => {\n                setCards([...cards, newCard]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            })\n            .finally(() => {\n                setIsLoading(false);\n            })\n    };\n\n    return (\n        <div className=\"page\">\n            <div className=\"page__cover\">\n                <Switch>\n                    <CurrentUserContext.Provider value={currentUser}>\n                        <Header onSignOut={onSignOut} loggedIn={loggedIn} email={email} />\n                        <Route path=\"/signin\">\n                            <Login onLogin={onLogin} isLoading={isLoading} />\n                        </Route>\n                        <Route path=\"/signup\">\n                            <Register onRegister={onRegister} isLoading={isLoading} />\n                        </Route>\n                        <ProtectedRoute exact path=\"/\" loggedIn=\"loggedIn\">\n                            <Main\n                                onEditAvatar={handleEditAvatarClick}\n                                onEditProfile={handleEditProfileClick}\n                                onAddPlace={handleAddPlaceClick}\n                                onCardClick={handleCardClick}\n                                onCardLike={handleCardLike}\n                                onCardDelete={handleDeletePopupOpenClick}\n                                cards={cards}\n                            />\n                            <Footer />\n                            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups}\n                                onUpdateUser={handleUpdateUser} isLoading={isLoading} />\n\n                            <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups}\n                                onAddPlace={handleAddPlaceSubmit} isLoading={isLoading} />\n\n                            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups}\n                                onUpdateAvatar={handleUpdateAvatar} isLoading={isLoading} />\n\n                            <DeleteConfirmPopup isOpen={isDeletePopupOpen} onClose={closeAllPopups}\n                                card={selectedCard} onCardDelete={handleCardDelete} isLoading={isLoading} />\n\n                            <ImagePopup isOpen={isImagePopupOpen} onClose={closeAllPopups} card={selectedCard} />\n\n                        </ProtectedRoute>\n                        <Route>\n                            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n                        </Route>\n                    </CurrentUserContext.Provider>\n                </Switch>\n                <InfoTooltip isRegister={isRegister} isOpen={isTooltipPopupOpen} onClose={closeAllPopups} />\n            </div>\n        </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n//import * as serviceWorker from './serviceWorker';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}